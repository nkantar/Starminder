{% load static %}
{% load socialaccount %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>☆ Starminder ☆</title>
    {% if feed_id %}
        <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="{% url 'atom_feed' feed_id %}">
    {% endif %}

    <!-- OpenGraph meta tags -->
    <meta property="og:title" content="☆ Starminder ☆">
    <meta property="og:description" content="Rediscover your GitHub stars.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://starminder.dev{{ request.path }}">
    <meta property="og:image" content="https://starminder.dev{% static 'img/starminder_hero.png' %}">
    <meta property="og:site_name" content="☆ Starminder ☆">

    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="☆ Starminder ☆">
    <meta name="twitter:description" content="Rediscover your GitHub stars.">
    <meta name="twitter:image" content="https://starminder.dev{% static 'img/starminder_hero.png' %}">

    <!-- assets -->
    <link rel="stylesheet" href="{% static 'css/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'css/fonts.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="shortcut icon" href="{% static 'img/starminder_star_180.png' %}">
    <link rel="apple-touch-icon" href="{% static 'img/starminder_star_180.png' %}">

    <!-- Plausible -->
    <script src="/static/js/script.js"></script>
    <script defer data-api="/api/event" data-domain="starminder.dev" src="/js/script.js"></script>
</head>
<body>
    <header>
        <h1><a href="/" title="Home">☆ Starminder ☆</a></h1>

        {% if user.is_authenticated %}
            <h4>Hello, <strong>{{ user.username }}</strong>.</h4>
            <nav>
                <ul>
                    <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
                    <li><a href="{% url 'reminder_list' user.user_profile.feed_id %}">Reminders</a></li>
                    <li><a href="{% url 'atom_feed' user.user_profile.feed_id %}">Feed</a></li>
                    <li><a href="{% url 'account_logout' %}">Logout</a></li>
                </ul>
            </nav>
        {% else %}
            <h4>Hello.</h4>
            <nav>
                <ul>
                    <li><form style="display: inline-block;" method="post" action="{% provider_login_url 'github' %}" style="display: inline;">{% csrf_token %}<button type="submit" class="link-button">Login with GitHub</button></form></li>
                </ul>
            </nav>
        {% endif %}
    </header>

    {% if page_title %}
        <h2>{{ page_title }}</h2>
    {% endif %}
    
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <footer>
        <nav>
            <ul>
                <li><a href="{% url 'faq' %}">FAQ</a></li>
                <li><a href="https://github.com/nkantar/Starminder">GitHub</a></li>
                <li></li>
            </ul>
        </nav>
        <p><a href="/" title="Starminder">Starminder</a> version {{ VERSION }} has {{ USER_COUNT }} users.</p>
        <p>Made with <span class="red">&hearts;</span> by <a class="green" href="https://nkantar.com" title="Nik Kantar">Nik Kantar</a>.</p>
    </footer>
</body>
</html>
